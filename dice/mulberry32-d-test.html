<!doctype html>
<html>
<!-- SPDX-License-Identifier: MIT -->

<head>
  <title>rng Test</title>
  <style>
    #graph th {
      text-align: center;
    }

    #graph td {
      vertical-align: bottom;
      padding: 8px;
    }

    .results {
      display: inline-block;
      border: 1px solid blue;
    }
    #graph .result {
      display: inline-block;
      width: 10px;
      background-color: #ccc;
    }
  </style>
</head>

<body>
  <div id="graph"></div>
  <script type="module">
import { RNGMulberry32 } from './random-number-generator-mulberry32.js';

const graph = document.getElementById('graph');
const runCount = 500000;
function scale(result, sides){
  return Math.floor((result*sides*100) / runCount) + 'px';
}

const table = document.createElement('table');
graph.appendChild(table);

const header = document.createElement('tr');
table.appendChild(header);

const hInt = document.createElement('th');
hInt.appendChild(document.createTextNode('rng.int'));
header.appendChild(hInt);

[2,3,4,6,8,10,12,20,100].forEach(sides => {
  const row = document.createElement('tr');
  table.appendChild(row);

  const intRNG = new RNGMulberry32();
  const intResults = [];
  for ( let i = 0; i < runCount; i++ ) {
    const value = intRNG.d(sides);
    intResults[value] = (intResults[value]||0) + 1;
  }

  const cInt = document.createElement('td');
  const cIntResults = document.createElement('div');
  cIntResults.classList.add('results');
  for( let side = 0; side <= sides + 1; side++ ) {
    const resDiv = document.createElement('div');
    resDiv.classList.add('result');
    resDiv.style.height = scale(intResults[side], sides);
    resDiv.title = side;
    cIntResults.appendChild( resDiv );

  }
  intResults.forEach(result => {
  });
  cInt.appendChild( cIntResults );
  row.appendChild(cInt);
});

  </script>
</body>

</html>
